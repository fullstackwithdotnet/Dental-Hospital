 @model IEnumerable<DIMS.ViewModels.LaboratoryRegistrationViewModel>

@{
    string modelName = ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix;
    int index = 0;
}
@functions{
    string GetId(string fieldName, int index)
    {
        return string.Format("{0}[{2}]_{1}", ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix, fieldName, index);
    }
    string GetName(string fieldName, int index)
    {
        return string.Format("{0}[{2}].{1}", ViewContext.ViewData.TemplateInfo.HtmlFieldPrefix, fieldName, index);
    }
}


<table class="table table-bordered">
    <tr style="background-color:aliceblue">
        <th class="hidden">
            @Html.DisplayNameFor(model => model.RadioTempDetId)
        </th>
        <th class="text-center">
            @Html.DisplayNameFor(model => model.ServiceItems)
        </th>
        <th class="text-center">
            @Html.DisplayNameFor(model => model.Result)
        </th>
        <th class="text-center">
            @Html.DisplayNameFor(model => model.MaleNormalRange)
        </th>
        <th class="text-center">
            @Html.DisplayNameFor(model => model.FemaleNormalRange)
        </th>
        <th class="text-center">
            @Html.DisplayNameFor(model => model.Unit)
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td class="hidden">
                @Html.TextBoxFor(modelItem => item.RadioTempId, new { @class = "col-sm-10", @id = GetId("RadioTempId", index), @Name = GetName("RadioTempId", index) })
                @Html.TextBoxFor(modelItem => item.RadioTempDetId, new { @class = "col-sm-10", @id = GetId("RadioTempDetId", index), @Name = GetName("RadioTempDetId", index) })
                @Html.TextBoxFor(modelItem => item.LaboratoryResultId, new { @class = "col-sm-10", @id = GetId("LaboratoryResultId", index), @Name = GetName("LaboratoryResultId", index) })
                @Html.TextBoxFor(modelItem => item.LaboratoryResultDetId, new { @class = "col-sm-10", @id = GetId("LaboratoryResultDetId", index), @Name = GetName("LaboratoryResultDetId", index) })
            </td>
            @if (item.IsHeader == "Y")
            {
                <td colspan="5">
                    <strong>@Html.DisplayFor(modelItem => item.ServiceItems)</strong>
                    @Html.HiddenFor(modelItem => item.ServiceItems, new { @class = "form-control", @id = GetId("ServiceItems", index), @Name = GetName("ServiceItems", index) })
                </td>
            }
            else
            {
                <td>
                    @Html.DisplayFor(modelItem => item.ServiceItems)
                    @Html.HiddenFor(modelItem => item.ServiceItems, new { @class = "form-control", @id = GetId("ServiceItems", index), @Name = GetName("ServiceItems", index) })
                </td>
                <td>
                    @Html.TextBoxFor(modelItem => item.Result, new { @class = "form-control", @id = GetId("Result", index), @Name = GetName("Result", index) })
                </td>
                <td class="text-center">
                    @Html.DisplayFor(modelItem => item.MaleNormalRange)
                    @Html.HiddenFor(modelItem => item.MaleNormalRange, new { @class = "form-control", @id = GetId("MaleNormalRange", index), @Name = GetName("MaleNormalRange", index) })
                </td>
                <td class="text-center">
                    @Html.DisplayFor(modelItem => item.FemaleNormalRange)
                    @Html.HiddenFor(modelItem => item.FemaleNormalRange, new { @class = "form-control", @id = GetId("FemaleNormalRange", index), @Name = GetName("FemaleNormalRange", index) })
                </td>
                <td class="text-center">
                    @Html.DisplayFor(modelItem => item.Unit)
                    @Html.HiddenFor(modelItem => item.Unit, new { @class = "form-control", @id = GetId("Unit", index), @Name = GetName("Unit", index) })
                </td>
            }
        </tr>
            index++;
    }

</table>



